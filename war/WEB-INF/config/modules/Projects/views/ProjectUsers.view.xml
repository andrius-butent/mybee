<?xml version="1.0" encoding="UTF-8"?>
<View xmlns="http://www.butent.com/view" name="ProjectUsers"
	source="ProjectUsers" caption="=prjTeam">
	<Columns>
		<SimpleColumn name="Project" />
		<SimpleJoin name="Project" joinType="LEFT">
		  <SimpleColumn name="Owner" />
		  <ExternalJoin name="Project" source="Tasks" joinType="LEFT" filter="(User = TaskOwner) OR (User = TaskExecutor)">
		    <HiddenColumn alias="TaskOwner" name="Owner"/>
		    <HiddenColumn alias="TaskExecutor" name="Executor"/>
		  
		    <IdColumn  name="TaskCount" aggregate="COUNT"></IdColumn>
		  </ExternalJoin>
		</SimpleJoin>
				
		<SimpleColumn name="User" />
		
		<SimpleJoin name="User" joinType="LEFT">
			<SimpleColumn name="CompanyPerson" alias="OwnerPerson" />
			<SimpleJoin name="CompanyPerson" joinType="LEFT">
				<SimpleJoin name="Person" joinType="LEFT">
					<SimpleColumn name="FirstName" />
					<SimpleColumn name="LastName" />
				</SimpleJoin>

				<SimpleColumn name="Contact" />
				<SimpleJoin name="Contact" joinType="LEFT">
					<SimpleColumn name="Phone" />
					<SimpleColumn name="Mobile" />
					<SimpleColumn name="Fax" />

					<SimpleColumn name="Email" alias="EmailId" />
					<SimpleJoin name="Email" joinType="LEFT">
						<SimpleColumn name="Email" />
					</SimpleJoin>
				</SimpleJoin>
				
				<SimpleColumn name="Position" />
				<SimpleJoin name="Position" joinType="LEFT">
				  <SimpleColumn name="Name" alias="PositionName" />
				</SimpleJoin>
				
			</SimpleJoin>
		</SimpleJoin>

		<SimpleColumn name="Rate" />
		<SimpleColumn name="Currency" />
		<SimpleColumn name="Notes" />
	</Columns>
	<Order>
		<OrderBy column="User" />
	</Order>
</View>
 