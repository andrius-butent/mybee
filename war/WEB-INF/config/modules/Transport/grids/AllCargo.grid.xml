<?xml version="1.0" encoding="UTF-8"?>
<g:Grid xmlns="http://www.butent.com/column" xmlns:g="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui"

  name="AllCargo" viewName="AllCargo" caption="=cargos" disabledActions="delete audit"
  flexGrow="1" newRowPopup="true" order="OrderID desc"
  >
  <g:body height="50" />

  <g:columns>
    <DataColumn name="OrderNo" caption="=orderNumber" />
    <DataColumn name="Status" caption="=status" />    
    <RelColumn name="Customer" caption="=customer" />
    <RelColumn name="Manager" caption="=manager" />

    <RelColumn name="Cargo" viewName="OrderCargo" renderColumns="Cargo" label="=captionId"
      editEnabled="true" filterSupplier="value" horizontalAlignment="right" />
    <DataColumn name="Description" maxWidth="200" />

    <CalcColumn name="Loading" type="string" cellType="html" caption="=loading" 
      searchBy="LoadingNumber LoadingContact LoadingAddress 
      LoadingPostIndex LoadingCityName LoadingCountryName LoadingCountryCode" 
      filterSupplier="value" />
    <DataColumn name="LoadingDate" caption="=trCargoLoadingDateShort" label="=trCargoLoadingDateShort" />
    <CalcColumn name="Unloading" type="string" cellType="html" caption="=unloading"
      searchBy="UnloadingNumber UnloadingContact UnloadingAddress 
      UnloadingPostIndex UnloadingCityName UnloadingCountryName UnloadingCountryCode" 
      filterSupplier="value" />
    <DataColumn name="UnloadingDate" caption="=trUnloadingDateShort" label="=trUnloadingDateShort"/>

    <DataColumn name="Partial" caption="=partialShort" width="15" sortable="false" />
    <DataColumn name="Outsized" caption="=dangerousShort" width="15" sortable="false" />
    <DataColumn name="Number" caption="=cargoNumber" />
    <DataColumn name="Cmr" caption="CMR" renderColumns="CmrName CmrNumber" />
    <DataColumn name="CargoNotes" caption="=cargoNotes" maxWidth="200" whiteSpace="pre-wrap" />

    <ActionColumn name="TripNo" element="link" />
    <DataColumn name="ExpeditionType" caption="=trExpeditionType" />
    <DataColumn name="ForwarderName" caption="=carrier" />
    <CalcColumn name="Vehicle" type="string" caption="=transport" 
      searchBy="ForwarderVehicle VehicleNumber TrailerNumber">
      <render>
        <ui:function>
          var vehicle = row.ForwarderVehicle;

          if (!vehicle) {
            vehicle = row.VehicleNumber;

            if (row.TrailerNumber) {
              vehicle = vehicle + ' / ' + row.TrailerNumber;
            }
          }
          return vehicle;
        </ui:function>
      </render>
    </CalcColumn>
    <CalcColumn name="Driver" type="string" caption="=vehicleDriver"
      searchBy="ForwarderDriver DriverLastName DriverFirstName">
      <render>
        <ui:function>
          var driver = row.ForwarderDriver;

          if (!driver) {
            driver = row.DriverFirstName;

            if (row.DriverLastName) {
              driver = driver + ' ' + row.DriverLastName;
            }
          }
          return driver;
        </ui:function>
      </render>
    </CalcColumn>
  </g:columns>
</g:Grid>
